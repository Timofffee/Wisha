# WishaScript
## О языке
Язык создан специально для проекта Wisha. Он обеспечивает простой способ создания истории, так как большинство вещей являются простыми и естественными. 

Язык в некоторой степени язык был вдохновлен языком, используемым в RenPy, но WishaScript идёт дальше и старается делать процесс написания сценариев ещё проще. Вам больше не нужно думать как правильно писать. Есть простой набор правил, средуя которым вы получите лучшую в мире игру!

## Как это работает
Язык работает по принципу "одна строка - одна команда". Также язык имеет систему меток и препроцессор, который объединяет или преобразует некоторые команды (например многострочный текст или плавное появление объекта). Изначально весь исходный сценарий преобразуется в действия (токены), расставляются метки и курсор начинает своё движение с метки `Start`.

Движку абсолютно всё равно на то, как разложены ваши сценарии. Вы можете хранить всю игру в одном файле или разбивать её на несколько частей.


## Базовый функционал
```
label Act 1
    title Акт 1
    env night city

    - Я выбежал на улицу и ничего не увидел.
    + Моё лицо было таким, что испугался бы даже мёртвый.
    
    ~ Ни слова больше.
    \ Хватит.
```

Базовый функицонал позволяет создавать достаточно простые вещи, такие как:
### Метки
Нередко вам придётся буквально перескакивать с одного куска истории в другой. Развилки? Смена сцены?

Как раз для этого и существует система меток. Она является ОБЯЗАТЕЛЬНЫМ элементом сценариев и должна быть объявлена в первую очередь, иначе движок выдаст ошибку. 
```
label <название_метки>
    <список действий>
```

Есть некоторые метки, которые являются зарезервированными. Это:
* `Start`. Она используется для обозначения всей истории. Если её не будет, игра не сможет начаться. 
* `End`. Данная метка сущетсвует для того, чтобы вы могу перейдя на неё "закончить историю". Стоит использовать только для перехода (`go End`).

#### Перемещения
Если в процессе перемещения курсора встречается ещё одна метка, то она будет проигнорированна. Метки нужны лишь для удобства и быстрых переходов. 
```
label Scene 1
    - Это некоторый текст,
    + находящийся в метке "Scene 1"

label Scene 2
    - Однако после курсор переместиться сюда,
    + так как курсор игнорирует объявление меток.
```
Если в какой-то момент вам необходимо переместиться к какой-либо метке, просто напишите команду `go <имя метки>` и ваш курсор действий перенесёт вас в ту самую точку, где объявлена метка.

```
label Scene 1
    - После этого текста курсор переместиться
    + на метку 'Scene 3"
    go Scene 3

label Scene 2
    - Вы никогда не увидите данный текст

label Scene 3
    - Кажется, теперь вы перешли по метке "Scene 3"
```

### Заголовки
Крупный текст посреди экрана, содержащее ключевую фразу или слово.
Достаточно вызвать команду `title <текст>` и вы получите то, что хотели.

_Однако, заголовок исчезнет при перемещени курсора на следующую строку._ 
### Окружение
_"Окружение" ещё не реализовано_

Окружение - всего лишь сокращение, которое хранит в себе 2 команды: выбор фонового изображения и выбор фоновой музыки.

### Фоновая музыка
Фоновая музыка будеи играть всё время и при завершении начнётся с начала.
Для её вызова используется команда `music <название трека>`

### Фоновое изображение
Фоновое изображение представляет из себя простое изображение с соотношением сторон 16:9.
```
..
background <название изображения>
..
```
Фон может быть многослойным. Для этого стоит передавать все необходимые слои через запятую
```
..
background <задний план>, <передний план>, <и так далее>
..
```
Многослойное фоновое изображение будет накладываться друг на друга по принципу "от первого к последнему".

### Монологи (описание и мысли)
Какая новелла без диалогов? Для вывода текста в WishaScript используются максимально короткие и понятные команды.

Для простого вывода текста достаточно использовать символ "дефис":
```
..
- Текст, который выведется в диалоговом окне.
- следующая строка сотрёт прошлую и запишет новую
..
```

Для вывода мыслей персонажа вы можете использовать команду-символ "тильда":
```
..
- За окном было солнечно.
~ Кажется, сегодня я никуда не пойду...
..
```
Иногда появляется необходимость в том, чтобы сделать многострочный вывод текста, но у нас принцип "одна строка - одна команда", значит для вывода многострочного текста на каждой новой строке стоит использовать команду "плюс". После преобразования весь показанный ниже код преобразуется в единый текст:
```
..
~ Если бы море было птичками,
+ Я наверное стал бы водичкой..
+ Если бы море стало статичным...
+ Я наверное.. Я... А что я?
..
```
Иногда бывает схожая ситуация, но вам необходимо добавить текст постепенно, не очищая диалоговое окно. Для этого существует команда "обратный слеш":
```
..
~ Я... 
\ Я... 
\ Я так больше не смогу...
..
```
### Скрытие диалогового окна
Если по какой-то причине вы решили, что диалоговое окно стоит скрыть, воспользуйтесь командой "`hide story`":
```
- <...>

hide story

title one minute later..
music chill
background night city

~ Как же хорошо...
```

Обратите внимание, что при следующем выводе текста диалоговое окно вновь появится, поэтому стоит скрывать окно только если вы хотите отобразить смену окружения и так далее.
### 